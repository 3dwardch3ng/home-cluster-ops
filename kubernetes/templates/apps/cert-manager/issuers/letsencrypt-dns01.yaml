apiVersion: v1
kind: Secret
metadata:
    name: cert-manager-secrets
type: Opaque
stringData:
    email: "test_email"
    cert-manager-dns01: "test_token"
immutable: true
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
    name: letsencrypt-dns01
    namespace: cert-manager
spec:
    acme:
        email: ${email}
        server: https://acme-v02.api.letsencrypt.org/directory
        privateKeySecretRef:
            name: letsencrypt-dns01
        solvers:
            - dns01:
                cloudflare:
                    apiTokenSecretRef:
                        name: cert-manager-secrets
                        key: cert-manager-dns01
